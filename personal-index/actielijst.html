<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actielijst - Project Dashboard</title>
    <link rel="stylesheet" href="./common-styles.css">
    <link href="actielijst-styles.css" rel="stylesheet">

</head>
<body>
    <div class="container">
        <header>
            <h1>üìã Actielijst</h1>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="openModal('filtersModal')" title="Filters toepassen">üîç Filters</button>
                <button class="btn btn-secondary" onclick="openModal('tagsModal')" title="Tags beheren">#Ô∏è‚É£ Tags</button>
                <button class="btn btn-primary" onclick="openModal()" title="Nieuwe taak toevoegen">+ Nieuwe Taak</button>
            </div>
        </header>

        <nav class="page-nav">
            <a href="./index.html" class="nav-link" title="Terug naar dashboard">üè† Dashboard</a>
            <span class="nav-link active" title="Huidige pagina">üìã Actielijst</span>
            <a href="./werknemerplanning.html" class="nav-link" title="Ga naar werknemerplanning">üë• Werknemerplanning</a>
            <a href="./besluitenpagina.html" class="nav-link" title="Ga naar besluitenpagina">‚öñÔ∏è Besluitenpagina</a>
        </nav>

        <div class="project-tabs" id="projectTabs"></div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="statTotal">0</div>
                <div class="stat-label">Totaal</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statActive">0</div>
                <div class="stat-label">Actief</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statCompleted">0</div>
                <div class="stat-label">Voltooid</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statOverdue">0</div>
                <div class="stat-label">Verlopen</div>
            </div>
        </div>

        <div class="controls">
            <input type="text" class="search-box" placeholder="üîç Zoek taken..." id="searchBox" oninput="filterTasks()">
            <select id="filterPriority" onchange="filterTasks()">
                <option value="">Alle prioriteiten</option>
                <option value="high">Hoog</option>
                <option value="medium">Gemiddeld</option>
                <option value="low">Laag</option>
            </select>
            <select id="filterStatus" onchange="filterTasks()">
                <option value="active">Actief</option>
                <option value="completed">Voltooid</option>
                <option value="all">Alles</option>
            </select>
        </div>

        <div class="task-list" id="taskList"></div>
    </div>

    <!-- Add/Edit Task Modal -->
    <div class="modal" id="taskModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Nieuwe Taak</h2>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <form id="taskForm" onsubmit="saveTask(event)">
                <div class="form-group">
                    <label>Titel *</label>
                    <input type="text" id="taskTitle" required>
                </div>
                <div class="form-group">
                    <label>Beschrijving</label>
                    <textarea id="taskDescription"></textarea>
                </div>
                <div class="date-range">
                    <div class="form-group">
                        <label>Startdatum</label>
                        <input type="date" id="taskStartDate">
                    </div>
                    <div class="form-group">
                        <label>Einddatum</label>
                        <input type="date" id="taskEndDate">
                    </div>
                </div>
                <div class="form-group">
                    <label>Project *</label>
                    <select id="taskProject" required>
                        <option value="">-- Selecteer project --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="taskStatus">
                        <option value="todo">üìã Te doen</option>
                        <option value="in-progress">‚ö° In uitvoering</option>
                        <option value="blocked">üö´ Geblokkeerd</option>
                        <option value="review">üëÄ Review</option>
                        <option value="done">‚úÖ Klaar</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Prioriteit</label>
                    <select id="taskPriority">
                        <option value="low">Laag</option>
                        <option value="medium" selected>Gemiddeld</option>
                        <option value="high">Hoog</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Deadline</label>
                    <input type="date" id="taskDeadline">
                </div>
                <div class="form-group">
                    <label>Overdragen aan</label>
                    <input type="text" id="taskAssignedTo" placeholder="Naam persoon">
                </div>
                <div class="form-group">
                    <label>Opdrachtgeving / Opmerkingen</label>
                    <textarea id="taskComment" placeholder="Voeg hier instructies of opmerkingen toe voor de toegewezen persoon..."></textarea>
                </div>
                <div class="form-group">
                    <label>#Ô∏è‚É£ Tags</label>
                    <div id="taskTagsList" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.75rem;"></div>
                    <small style="color: var(--text-muted);">Klik op tags om toe te voegen/verwijderen</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Annuleren</button>
                    <button type="submit" class="btn btn-primary">Opslaan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Templates Modal -->
    <div id="templatesModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>üìã Taak Sjablonen</h2>
                <span class="close-btn" onclick="closeModal('templatesModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <div>
                        <h3 style="margin-bottom: 1rem;">Beschikbare Sjablonen</h3>
                        <div id="templatesList" style="display: flex; flex-direction: column; gap: 0.75rem;"></div>
                    </div>
                    <div>
                        <h3 style="margin-bottom: 1rem;">Nieuwe Sjabloon</h3>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div>
                                <label>Sjabloon Naam</label>
                                <input type="text" id="templateName" placeholder="bijv. Wekelijks Report" class="form-input" style="width: 100%; padding: 0.5rem; background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text);">
                            </div>
                            <div>
                                <label>Beschrijving</label>
                                <textarea id="templateDescription" placeholder="Beschrijving van deze taak sjabloon..." class="form-input" rows="3" style="width: 100%; padding: 0.5rem; background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text);"></textarea>
                            </div>
                            <div>
                                <label>Project</label>
                                <select id="templateProject" class="form-input" style="width: 100%; padding: 0.5rem; background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text);">
                                    <option value="">Alle projecten</option>
                                </select>
                            </div>
                            <div>
                                <label>Priority</label>
                                <select id="templatePriority" class="form-input" style="width: 100%; padding: 0.5rem; background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text);">
                                    <option value="low">Laag</option>
                                    <option value="medium" selected>Middel</option>
                                    <option value="high">Hoog</option>
                                </select>
                            </div>
                            <div>
                                <label>Status</label>
                                <select id="templateStatus" class="form-input" style="width: 100%; padding: 0.5rem; background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text);">
                                    <option value="todo" selected>Te Doen</option>
                                    <option value="in-progress">In Uitvoering</option>
                                </select>
                            </div>
                            <button onclick="saveTemplate()" class="btn btn-primary">üíæ Opslaan als Sjabloon</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Filters Modal -->
    <div id="filtersModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>üîç Geavanceerde Filters</h2>
                <span class="close-btn" onclick="closeModal('filtersModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="filter-section">
                    <div class="filter-title">Mijn Taken</div>
                    <div class="filter-grid">
                        <button class="filter-btn" onclick="applyFilter('myTasks')">Mijn Taken</button>
                        <button class="filter-btn" onclick="applyFilter('assigned')">Aan Mij Toegewezen</button>
                        <button class="filter-btn" onclick="applyFilter('overdue')">Verlopen</button>
                        <button class="filter-btn" onclick="applyFilter('thisWeek')">Deze Week</button>
                        <button class="filter-btn" onclick="applyFilter('today')">Vandaag</button>
                    </div>
                </div>
                <div class="filter-section">
                    <div class="filter-title">Status Groepen</div>
                    <div class="filter-grid">
                        <button class="filter-btn" onclick="applyFilter('active')">Actief</button>
                        <button class="filter-btn" onclick="applyFilter('pending')">Te Doen</button>
                        <button class="filter-btn" onclick="applyFilter('inReview')">In Review</button>
                        <button class="filter-btn" onclick="applyFilter('done')">Afgerond</button>
                    </div>
                </div>
                <div class="filter-section">
                    <div class="filter-title">Priority</div>
                    <div class="filter-grid">
                        <button class="filter-btn" onclick="applyFilter('highPriority')">üî¥ Hoog</button>
                        <button class="filter-btn" onclick="applyFilter('mediumPriority')">üü° Middel</button>
                        <button class="filter-btn" onclick="applyFilter('lowPriority')">üü¢ Laag</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Modal -->
    <div id="statsModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>üìä Statistieken Dashboard</h2>
                <span class="close-btn" onclick="closeModal('statsModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-item-label">Totale Taken</div>
                        <div class="stat-item-value" id="statTotalTasks">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item-label">Afgerond %</div>
                        <div class="stat-item-value" id="statCompletionRate">0%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item-label">Verlopen Taken</div>
                        <div class="stat-item-value" id="statOverdue">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-item-label">Deze Week</div>
                        <div class="stat-item-value" id="statThisWeek">0</div>
                    </div>
                </div>
                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;">Taken per Persoon</h3>
                    <div id="statsPerPerson" style="display: grid; gap: 0.75rem;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tags Modal -->
    <div id="tagsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>#Ô∏è‚É£ Tags Manager</h2>
                <span class="close-btn" onclick="closeModal('tagsModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div>
                    <label>Beschikbare Tags</label>
                    <div id="availableTagsList" style="display: flex; flex-wrap: wrap; gap: 0.75rem; margin-bottom: 1.5rem;"></div>
                </div>
                <div>
                    <label>Nieuwe Tag</label>
                    <input type="text" id="newTagInput" placeholder="#tag-naam" class="form-input" style="width: 100%; padding: 0.5rem; background: var(--dark-card); border: 1px solid var(--border); border-radius: 8px; color: var(--text); margin-bottom: 0.5rem;">
                    <button onclick="addNewTag()" class="btn btn-primary">Voeg Tag Toe</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Activity Log Modal -->
    <div class="log-modal" id="logModal">
        <div class="log-content">
            <div class="modal-header">
                <h2>Activiteiten Log</h2>
                <button class="close-btn" onclick="closeLogModal()">√ó</button>
            </div>
            
            <div class="assigned-section" id="assignedSection"></div>
            
            <div id="logList"></div>
            
            <div class="close-action-section" id="closeActionSection" style="display: none;">
                <div class="close-action-title">‚úÖ Actie Afmelden</div>
                <div class="form-group">
                    <label>Opdrachtgeving bij afmelding</label>
                    <textarea id="closeComment" placeholder="Beschrijf wat je hebt afgehandeld..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Eindstatus *</label>
                        <select id="closeStatus">
                            <option value="">-- Selecteer status --</option>
                            <option value="done">‚úÖ Afgehandeld</option>
                            <option value="blocked">üö´ Geblokkeerd</option>
                            <option value="review">üëÄ Needs Review</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nieuwe actiehouder (optioneel)</label>
                        <input type="text" id="newAssignee" placeholder="Laat leeg als taak klaar is">
                    </div>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="closeLogModal()">Annuleren</button>
                    <button class="btn btn-primary" onclick="submitCloseAction()">Actie Afmelden</button>
                </div>
            </div>
            
            <div class="comments-section" id="commentsSection" style="display: none;">
                <div class="comments-title">üí¨ Opmerkingen</div>
                <div id="commentsList"></div>
                <div class="form-group" style="margin-top: 1rem;">
                    <textarea id="newComment" placeholder="Voeg een opmerking toe..."></textarea>
                </div>
                <button class="btn btn-primary" onclick="addComment()" style="width: 100%;">Opmerking Toevoegen</button>
            </div>
        </div>
    </div>

    <script src="actielijst-script.js"></script>
</body>
</html>
