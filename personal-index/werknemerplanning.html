<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Werknemerplanning - Project Dashboard</title>
    <link rel="stylesheet" href="./common-styles.css">
    <link rel="stylesheet" href="./werknemerplanning-styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ‘¥ Werknemerplanning</h1>
            <div class="header-actions">
                <button class="btn btn-primary" onclick="openAddEmployeeModal()" title="Nieuwe werknemer toevoegen">+ Werknemer</button>
            </div>
        </header>

        <nav class="page-nav">
            <a href="./index.html" class="nav-link" title="Terug naar dashboard">ğŸ  Dashboard</a>
            <a href="./actielijst.html" class="nav-link" title="Ga naar actielijst">ğŸ“‹ Actielijst</a>
            <span class="nav-link active" title="Huidige pagina">ğŸ‘¥ Werknemerplanning</span>
            <a href="./besluitenpagina.html" class="nav-link" title="Ga naar besluitenpagina">âš–ï¸ Besluitenpagina</a>
        </nav>

        <div class="section-header" style="margin-bottom: 1rem;">
            <h2 style="margin: 0; font-size: 1rem; color: var(--text-muted); font-weight: 500;">ğŸ“ Filter op Project</h2>
        </div>
        <div class="project-tabs" id="projectTabs" style="display: flex; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap;"></div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="statTotalEmployees">0</div>
                <div class="stat-label">Werknemers</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statPlannedDays">0</div>
                <div class="stat-label">Geplande Dagen</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statAverageOccupancy">0%</div>
                <div class="stat-label">Gemiddelde Bezetting</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="statLowWeeks">0</div>
                <div class="stat-label">Weken &lt;70%</div>
            </div>
        </div>

        <div class="alerts" id="alertsContainer"></div>

        <div class="controls">
            <div class="view-selector">
                <button class="view-btn active" onclick="switchView('month')">ğŸ“… Maand</button>
                <button class="view-btn" onclick="switchView('week')">ğŸ“Š Week</button>
                <button class="view-btn" onclick="switchView('custom')">ğŸ“‹ Selectie</button>
            </div>
            <div class="date-range">
                <input type="date" id="startDate" onchange="updateView()">
                <span>tot</span>
                <input type="date" id="endDate" onchange="updateView()">
            </div>
        </div>

        <div class="planning-container">
            <div class="planning-grid" id="planningGrid"></div>
        </div>
    </div>

    <!-- Add/Edit Employee Modal -->
    <div class="modal" id="employeeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="employeeModalTitle">Werknemer Toevoegen</h2>
                <button class="close-btn" onclick="closeModal('employeeModal')">Ã—</button>
            </div>
            <form id="employeeForm" onsubmit="saveEmployee(event)">
                <div class="form-group">
                    <label>Naam *</label>
                    <input type="text" id="employeeName" placeholder="Volledige naam" required>
                </div>
                <div class="form-group">
                    <label>Rol</label>
                    <input type="text" id="employeeRole" placeholder="bijv. Developer">
                </div>
                <div class="form-group">
                    <label>Projecten (meerdere mogelijk) *</label>
                    <div id="employeeProjectsCheckboxes" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.75rem; padding: 1rem; background: var(--dark-lighter); border: 1px solid var(--border); border-radius: 8px; max-height: 200px; overflow-y: auto;"></div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('employeeModal')">Annuleren</button>
                    <button type="submit" class="btn btn-primary">Opslaan</button>
                </div>
            </form>
            <div id="employeeLeavesSection" style="display: none; margin-top: 2rem;">
                <h3>Aangevraagde verlofdagen</h3>
                <div id="employeeLeavesList" style="max-height: 200px; overflow-y: auto; padding: 1rem; background: var(--dark-lighter); border-radius: 8px;"></div>
            </div>
        </div>
    </div>

    <!-- Edit Day Modal -->
    <div class="modal" id="editDayModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“… Dag Aanpassen</h2>
                <button class="close-btn" onclick="closeModal('editDayModal')">Ã—</button>
            </div>
            <div style="margin-bottom: 2rem;">
                <div style="padding: 1rem; background: var(--dark-lighter); border-radius: 8px; margin-bottom: 1.5rem;">
                    <h3 style="margin: 0 0 0.5rem 0;" id="editDayEmployee">Werknemer</h3>
                    <p style="margin: 0; color: var(--text-muted);" id="editDayDate">Datum</p>
                    <p style="margin: 0.5rem 0 0 0; color: var(--warning);" id="editDayCurrentStatus">Huidige status</p>
                </div>

                <h3 style="margin-bottom: 1rem;">Wijzig naar:</h3>
                
                <div style="display: grid; gap: 1rem;">
                    <button class="btn" onclick="changeDayStatus('work')" style="padding: 1.25rem; text-align: left; background: var(--success); border: none; display: flex; align-items: center; gap: 1rem; font-size: 1rem;">
                        <span style="font-size: 2rem;">âœ“</span>
                        <div>
                            <div style="font-weight: 600;">Gewoon werken</div>
                            <div style="font-size: 0.875rem; opacity: 0.9;">Verlof annuleren voor deze dag</div>
                        </div>
                    </button>

                    <button class="btn" onclick="changeDayStatus('vacation')" style="padding: 1.25rem; text-align: left; background: var(--primary); border: none; display: flex; align-items: center; gap: 1rem; font-size: 1rem;">
                        <span style="font-size: 2rem;">ğŸ–ï¸</span>
                        <div>
                            <div style="font-weight: 600;">Vakantie</div>
                            <div style="font-size: 0.875rem; opacity: 0.9;">Wijzig naar vakantiedag</div>
                        </div>
                    </button>

                    <button class="btn" onclick="changeDayStatus('sick')" style="padding: 1.25rem; text-align: left; background: var(--danger); border: none; display: flex; align-items: center; gap: 1rem; font-size: 1rem;">
                        <span style="font-size: 2rem;">ğŸ¤’</span>
                        <div>
                            <div style="font-weight: 600;">Ziek</div>
                            <div style="font-size: 0.875rem; opacity: 0.9;">Wijzig naar ziekmelding</div>
                        </div>
                    </button>

                    <button class="btn" onclick="changeDayStatus('parttime')" style="padding: 1.25rem; text-align: left; background: var(--warning); border: none; display: flex; align-items: center; gap: 1rem; font-size: 1rem;">
                        <span style="font-size: 2rem;">â±ï¸</span>
                        <div>
                            <div style="font-weight: 600;">Parttime</div>
                            <div style="font-size: 0.875rem; opacity: 0.9;">Wijzig naar parttime dag</div>
                        </div>
                    </button>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="closeModal('editDayModal')">Annuleren</button>
            </div>
        </div>
    </div>

    <!-- Cloud Sync Settings Modal -->
    <!-- Add Leave Modal -->
    <div class="modal" id="leaveModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Verlof Toevoegen</h2>
                <button class="close-btn" onclick="closeModal('leaveModal')">Ã—</button>
            </div>
            <form id="leaveForm" onsubmit="saveLeave(event)">
                <div class="form-group">
                    <label>Werknemer *</label>
                    <select id="leaveEmployee" required>
                        <option value="">-- Selecteer werknemer --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Startdatum *</label>
                    <input type="date" id="leaveStartDate" required>
                </div>
                <div class="form-group">
                    <label>Einddatum *</label>
                    <input type="date" id="leaveEndDate" required>
                </div>
                <div class="form-group">
                    <label>Type *</label>
                    <select id="leaveType" required onchange="onLeaveTypeChange()">
                        <option value="vacation">ğŸ–ï¸ Vakantie</option>
                        <option value="sick">ğŸ¤’ Ziek</option>
                        <option value="parttime">â±ï¸ Part-time</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Opmerking</label>
                    <textarea id="leaveNote" placeholder="Extra informatie..."></textarea>
                </div>
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="checkbox" id="applyWeekdays" style="width: auto;" onchange="toggleWeekdaySelector()">
                        <span>Herhaal op specifieke weekdagen</span>
                    </label>
                    <div id="weekdaySelector" style="display: none; margin-top: 0.75rem; padding: 1rem; background: var(--dark-card); border-radius: 8px;">
                        <label style="display: block; margin-bottom: 0.75rem; font-weight: 600;">Selecteer weekdagen:</label>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 0.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="1" style="width: auto;">
                                <span>Maandag</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="2" style="width: auto;">
                                <span>Dinsdag</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="3" style="width: auto;">
                                <span>Woensdag</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="4" style="width: auto;">
                                <span>Donderdag</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="5" style="width: auto;">
                                <span>Vrijdag</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="6" style="width: auto;">
                                <span>Zaterdag</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" class="weekday-checkbox" value="0" style="width: auto;">
                                <span>Zondag</span>
                            </label>
                        </div>
                    </div>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.5rem;">Vink aan om automatisch geselecteerde weekdagen te markeren</small>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('leaveModal')">Annuleren</button>
                    <button type="submit" class="btn btn-primary">Opslaan</button>
                </div>
            </form>
        </div>
    </div>

    <script src="werknemerplanning-script.js"></script>
</body>
</html>
